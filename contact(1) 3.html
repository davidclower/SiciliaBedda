<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - Sicilia Bedda</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="translations(1).js"></script>
    <script>window.translations = window.translations || (typeof translations !== 'undefined' ? translations : null);</script>
    <style>
        body {
            font-family: 'Georgia Pro', Georgia, 'Times New Roman', serif;
            background-color: #faf8f5;
        }
        h1, h2, h3 {
            font-family: 'Georgia Pro', Georgia, 'Times New Roman', serif;
        }
        .trinacria {
            opacity: 0.4;
        }
        .image-placeholder {
            background: #e8e5df;
            aspect-ratio: 16/9;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #9a9288;
            font-size: 0.875rem;
            border: 1px dashed #c9c5bd;
        }
        .language-dropdown { position: relative; }
        .language-trigger { background: none; border: none; cursor: pointer; font: inherit; font-size: inherit; color: inherit; padding: 0.25rem 0; display: inline-flex; align-items: center; gap: 0.35rem; color: #44403c; border-left: 1px solid #e7e5e4; margin-left: 0.5rem; padding-left: 0.75rem; }
        .language-trigger:hover { color: #1c1917; }
        .language-trigger-flag { width: 20px; height: 15px; object-fit: cover; border-radius: 1px; }
        .language-trigger-arrow { font-size: 0.65em; opacity: 0.8; }
        .language-menu { position: absolute; top: 100%; right: 0; margin-top: 0.25rem; background: #fafaf9; border: 1px solid #e7e5e4; border-radius: 0.375rem; box-shadow: 0 4px 12px rgba(0,0,0,0.08); min-width: 140px; z-index: 1000; display: none; }
        .language-menu.active { display: block; }
        .about-dropdown { position: relative; }
        .about-dropdown-button { background: none; border: none; cursor: pointer; font: inherit; font-size: inherit; color: inherit; font-weight: 400; padding: 0; display: inline-flex; align-items: center; gap: 0.25rem; }
        .about-dropdown-button:hover { color: #1c1917; }
        .about-dropdown-menu { position: absolute; top: 100%; left: 0; margin-top: 2px; background: white; border: 1px solid #d1d5db; border-radius: 0.375rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); min-width: 200px; z-index: 1000; display: none; }
        .about-dropdown-menu.active { display: block; }
        .about-dropdown-item { display: block; padding: 0.5rem 1rem; min-height: 36px; font-size: 0.9375rem; color: #44403c; text-decoration: none; transition: background 0.15s; line-height: 1.4; }
        .about-dropdown-item:hover { background: #f5f5f4; color: #1c1917; }
        .language-option { padding: 0.5rem 0.75rem; display: flex; align-items: center; gap: 0.5rem; cursor: pointer; font-size: 0.875rem; color: #44403c; transition: background 0.15s; }
        .language-option:hover { background: #f5f5f4; color: #1c1917; }
        .language-option img { width: 20px; height: 15px; object-fit: cover; border-radius: 1px; }
        .nav-link { font-weight: 400; }
        a { color: #A52A2A; text-decoration: none; }
        a:hover { text-decoration: none; }
        .form-message {
            padding: 1rem;
            border-radius: 0.375rem;
            margin-top: 1rem;
            display: none;
        }
        .form-message.success {
            background-color: #d1fae5;
            color: #065f46;
            border: 1px solid #6ee7b7;
        }
        .form-message.error {
            background-color: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
        }
        .form-message.show {
            display: block;
        }
        .form-submitting {
            opacity: 0.6;
            pointer-events: none;
        }
        .form-submitting button {
            cursor: not-allowed;
        }
        @media (max-width: 767px) {
            body { overflow-x: hidden; -webkit-text-size-adjust: 100%; }
            header { overflow: visible; }
            nav { overflow: visible; }
            .about-dropdown-menu { z-index: 1100; }
            .language-trigger { min-height: 44px; padding: 0.5rem 0.25rem 0.5rem 0.75rem; -webkit-tap-highlight-color: transparent; }
            .language-option { min-height: 44px; padding: 0.75rem; -webkit-tap-highlight-color: transparent; }
            .about-dropdown-button { min-height: 44px; padding: 0.5rem 0.25rem; }
            .about-dropdown-item { min-height: 44px; padding: 0.75rem 1rem; display: flex; align-items: center; -webkit-tap-highlight-color: transparent; }
            .nav-link { min-height: 44px; display: inline-flex; align-items: center; padding: 0.25rem 0; }
            #submit-button { min-height: 44px; padding: 0.75rem 1.5rem; -webkit-tap-highlight-color: transparent; }
            input, textarea, select { font-size: 16px !important; min-height: 44px; }
            textarea { min-height: 120px; }
        }
    </style>
</head>
<body>
    
    <!-- Header -->
    <header class="border-b border-stone-200 bg-white/90 backdrop-blur-sm md:sticky md:top-0 z-40">
        <div class="max-w-4xl mx-auto px-6 py-4">
            <div class="flex flex-col items-center mb-4">
                <a href="index.html" class="text-center">
                    <h1 class="text-4xl md:text-5xl mb-2 leading-tight" style="font-family: 'Trajan Pro', 'Times New Roman', Georgia, serif; font-weight: 600; letter-spacing: 0.15em; color: #8B4513;" data-i18n="heroTitle">SICILIA BEDDA</h1>
                </a>
            </div>
            <nav class="flex flex-wrap justify-center gap-4 text-sm text-stone-700 items-center">
                <a href="index.html" class="nav-link hover:text-stone-900" data-i18n="navHome">Home</a>
                <div class="about-dropdown">
                    <button type="button" class="about-dropdown-button nav-link hover:text-stone-900" id="about-dropdown-button" aria-haspopup="true" aria-expanded="false">
                        <span data-i18n="navAbout">About</span>
                    </button>
                    <div class="about-dropdown-menu" id="about-dropdown-menu" role="menu">
                        <a href="about(1).html" class="about-dropdown-item" role="menuitem" data-i18n="navOurFounder">Our Founder</a>
                        <a href="sicily(1).html" class="about-dropdown-item" role="menuitem" data-i18n="navSicily">Sicily</a>
                        <a href="parco-madonie(1).html" class="about-dropdown-item" role="menuitem" data-i18n="navParcoMadonie">Parco delle Madonie</a>
                        <a href="isnello(1).html" class="about-dropdown-item" role="menuitem" data-i18n="navIsnello">Isnello</a>
                        <a href="collesano(1).html" class="about-dropdown-item" role="menuitem" data-i18n="navCollesano">Collesano</a>
                        <a href="castelbuono.html" class="about-dropdown-item" role="menuitem" data-i18n="navCastelbuono">Castelbuono</a>
                    </div>
                </div>
                <a href="current-restoration.html" class="nav-link hover:text-stone-900" data-i18n="navCurrentRestoration">Current Restorations</a>
                <a href="support-cause.html" class="nav-link hover:text-stone-900" data-i18n="navSupportCause">Support Our Cause</a>
                <a href="contact(1).html" class="nav-link hover:text-stone-900" data-i18n="navContact">Contact Us</a>
                <div class="language-dropdown">
                    <button type="button" class="language-trigger nav-link hover:text-stone-900" id="language-button" aria-haspopup="true" aria-expanded="false">
                        <img src="https://flagcdn.com/w40/gb.png" alt="" id="current-flag" class="language-trigger-flag">
                        <span id="current-language">English</span>
                        <span class="language-trigger-arrow" aria-hidden="true">▾</span>
                    </button>
                    <div class="language-menu" id="language-menu" role="menu">
                        <div class="language-option" data-lang="en" role="menuitem"><img src="https://flagcdn.com/w40/gb.png" alt=""><span>English</span></div>
                        <div class="language-option" data-lang="it" role="menuitem"><img src="https://flagcdn.com/w40/it.png" alt=""><span>Italiano</span></div>
                        <div class="language-option" data-lang="scn" role="menuitem"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 3 2'%3E%3Cpath fill='%23ffc72c' d='M0 0h3v1H0z'/%3E%3Cpath fill='%23d21034' d='M0 1h3v1H0z'/%3E%3C/svg%3E" alt=""><span>Sicilianu</span></div>
                        <div class="language-option" data-lang="es" role="menuitem"><img src="https://flagcdn.com/w40/es.png" alt=""><span>Español</span></div>
                        <div class="language-option" data-lang="fr" role="menuitem"><img src="https://flagcdn.com/w40/fr.png" alt=""><span>Français</span></div>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Contact -->
    <section class="max-w-5xl mx-auto px-6 py-16">
        <div class="space-y-6 text-stone-700 leading-relaxed text-lg max-w-3xl mx-auto">
            <p data-i18n="contactPara1">
                We welcome inquiries from property owners in Isnello, potential partners, donors, and those interested in long-stay accommodations or residencies.
            </p>
            <p data-i18n="contactPara2">
                For questions about restoration work, supporting a project, or general inquiries about Sicilia Bedda, please reach out:
            </p>
        </div>
        
        <!-- Contact Form -->
        <div class="max-w-2xl mx-auto mt-12">
            <form class="space-y-6" id="contact-form">
                <div>
                    <label for="name" class="block text-stone-700 text-sm font-medium mb-2" data-i18n="formNameLabel">Name</label>
                    <input type="text" id="name" name="name" required 
                           class="w-full px-4 py-3 border border-stone-300 rounded-sm bg-white text-stone-900 focus:outline-none focus:border-stone-500 focus:ring-1 focus:ring-stone-500"
                           data-i18n-placeholder="formNamePlaceholder" placeholder="Your name">
                </div>
                
                <div>
                    <label for="email" class="block text-stone-700 text-sm font-medium mb-2" data-i18n="formEmailLabel">Email Address</label>
                    <input type="email" id="email" name="email" required 
                           class="w-full px-4 py-3 border border-stone-300 rounded-sm bg-white text-stone-900 focus:outline-none focus:border-stone-500 focus:ring-1 focus:ring-stone-500"
                           data-i18n-placeholder="formEmailPlaceholder" placeholder="your.email@example.com">
                </div>
                
                <div>
                    <label for="phone" class="block text-stone-700 text-sm font-medium mb-2" data-i18n="formPhoneLabel">Phone Number / WhatsApp</label>
                    <input type="tel" id="phone" name="phone" 
                           class="w-full px-4 py-3 border border-stone-300 rounded-sm bg-white text-stone-900 focus:outline-none focus:border-stone-500 focus:ring-1 focus:ring-stone-500"
                           data-i18n-placeholder="formPhonePlaceholder" placeholder="+1 (555) 123-4567">
                </div>
                
                <div>
                    <label for="country" class="block text-stone-700 text-sm font-medium mb-2" data-i18n="formCountryLabel">Country of Residence</label>
                    <select id="country" name="country" required 
                            class="w-full px-4 py-3 border border-stone-300 rounded-sm bg-white text-stone-900 focus:outline-none focus:border-stone-500 focus:ring-1 focus:ring-stone-500">
                        <option value="" data-i18n="formCountryPlaceholder">Select your country</option>
                        <option value="US">United States</option>
                        <option value="IT">Italy</option>
                        <option value="GB">United Kingdom</option>
                        <option value="CA">Canada</option>
                        <option value="AU">Australia</option>
                        <option value="DE">Germany</option>
                        <option value="FR">France</option>
                        <option value="ES">Spain</option>
                        <option value="CH">Switzerland</option>
                        <option value="NL">Netherlands</option>
                        <option value="BE">Belgium</option>
                        <option value="AT">Austria</option>
                        <option value="SE">Sweden</option>
                        <option value="NO">Norway</option>
                        <option value="DK">Denmark</option>
                        <option value="IE">Ireland</option>
                        <option value="PT">Portugal</option>
                        <option value="GR">Greece</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div>
                    <label for="message" class="block text-stone-700 text-sm font-medium mb-2" data-i18n="formMessageLabel">Message (Optional)</label>
                    <textarea id="message" name="message" rows="5" 
                              class="w-full px-4 py-3 border border-stone-300 rounded-sm bg-white text-stone-900 focus:outline-none focus:border-stone-500 focus:ring-1 focus:ring-stone-500"
                              data-i18n-placeholder="formMessagePlaceholder" placeholder="Tell us about your inquiry..."></textarea>
                </div>
                
                <button type="submit" 
                        id="submit-button"
                        class="w-full text-white px-6 py-3 rounded-sm font-medium transition-colors"
                        style="background-color: #A52A2A;"
                        onmouseover="this.style.backgroundColor='#8B1F1F'"
                        onmouseout="this.style.backgroundColor='#A52A2A'"
                        data-i18n="formSubmitButton">Send Message</button>
                
                <!-- Success/Error Messages -->
                <div id="form-message" class="form-message"></div>
            </form>
            
            <p class="mt-8 text-sm text-stone-600 text-center" data-i18n="contactNote">
                We respond to all inquiries within a few business days.
            </p>
        </div>
    </section>

    <!-- Footer -->
    <footer class="max-w-5xl mx-auto px-6 py-5 border-t border-stone-200 mt-0">
        <div class="text-center">
            <img src="SiciliaBedda_Logo.PNG" alt="Sicilia Bedda" class="mx-auto" style="height: 120px;" />
            <p class="mt-4 text-stone-600 text-sm">siciliabedda.com</p>
            <p class="mt-2 text-stone-500 text-xs" data-i18n="footerOperatedBy">Operated by Desert Cove Ventures, LLC</p>
        </div>
    </footer>

    <script src="language.js"></script>
    <script>
        // API endpoint: local dev → localhost; production uses Vercel (change if your Vercel project URL is different)
        window.CONTACT_API_BASE = window.CONTACT_API_BASE || 'https://siciliabedda-contact.vercel.app';
        const API_ENDPOINT = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
            ? 'http://localhost:3000/api/contact'
            : (window.CONTACT_API_BASE ? window.CONTACT_API_BASE + '/api/contact' : '/api/contact');

        // Handle form submission
        document.getElementById('contact-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const form = e.target;
            const submitButton = document.getElementById('submit-button');
            const messageDiv = document.getElementById('form-message');
            const originalButtonText = submitButton.textContent;
            
            // Hide any previous messages
            messageDiv.classList.remove('show', 'success', 'error');
            
            // Get form data
            const formData = {
                name: document.getElementById('name').value.trim(),
                email: document.getElementById('email').value.trim(),
                phone: document.getElementById('phone').value.trim(),
                country: document.getElementById('country').value,
                message: document.getElementById('message').value.trim()
            };
            
            // Basic client-side validation
            if (!formData.name || !formData.email || !formData.country) {
                showMessage('Please fill in all required fields.', 'error');
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(formData.email)) {
                showMessage('Please enter a valid email address.', 'error');
                return;
            }
            
            // Disable form and show loading state
            form.classList.add('form-submitting');
            submitButton.textContent = 'Sending...';
            submitButton.disabled = true;
            
            try {
                const response = await fetch(API_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    // Success
                    showMessage(data.message || 'Thank you for your message! We will get back to you soon.', 'success');
                    form.reset();
                } else {
                    // Error from server
                    showMessage(data.message || data.error || 'There was an error sending your message. Please try again.', 'error');
                }
            } catch (error) {
                // Network or other error
                console.error('Form submission error:', error);
                showMessage('There was an error connecting to the server. Please check your internet connection and try again, or email us directly at info@siciliabedda.com', 'error');
            } finally {
                // Re-enable form
                form.classList.remove('form-submitting');
                submitButton.textContent = originalButtonText;
                submitButton.disabled = false;
            }
        });
        
        function showMessage(message, type) {
            const messageDiv = document.getElementById('form-message');
            messageDiv.textContent = message;
            messageDiv.className = `form-message ${type} show`;
            
            // Scroll to message
            messageDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            
            // Auto-hide success messages after 10 seconds
            if (type === 'success') {
                setTimeout(() => {
                    messageDiv.classList.remove('show');
                }, 10000);
            }
        }

        // Mark active nav link
        (function() {
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            document.querySelectorAll('.nav-link').forEach(link => {
                const linkPage = link.getAttribute('href');
                if (linkPage === currentPage || (currentPage === '' && linkPage === 'index.html')) {
                    link.classList.add('active');
                }
            });
        })();
    </script>

</body>
</html>
